{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DefaultProvider = /** @class */ (function () {\n    function DefaultProvider(provider) {\n        this.provider = provider;\n    }\n    DefaultProvider.prototype.getSetData = function (p) {\n        return p && p.setData && p.setData.bind(p);\n    };\n    DefaultProvider.prototype.request = function (params) {\n        var fn = this.provider && this.provider.request;\n        return this.promisify(fn, params);\n    };\n    DefaultProvider.prototype.getStorageInfo = function () {\n        var fn = this.provider && this.provider.getStorageInfo;\n        return this.promisify(fn);\n    };\n    DefaultProvider.prototype.removeStorage = function (params) {\n        var fn = this.provider && this.provider.removeStorage;\n        return this.promisify(fn, params);\n    };\n    DefaultProvider.prototype.setStorage = function (params) {\n        var fn = this.provider && this.provider.setStorage;\n        return this.promisify(fn, params);\n    };\n    DefaultProvider.prototype.getStorage = function (params) {\n        var fn = this.provider && this.provider.getStorage;\n        return this.promisify(fn, params);\n    };\n    DefaultProvider.prototype.getStorageSync = function (key) {\n        var fn = this.provider && this.provider.getStorageSync;\n        return fn(key);\n    };\n    DefaultProvider.prototype.getCurrentPages = function () {\n        var fn = this.provider && this.provider.getCurrentPages;\n        fn = fn || getCurrentPages;\n        return fn();\n    };\n    DefaultProvider.prototype.promisify = function (fn, params) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(\"Invalid provider type.\");\n        }\n        params = Object.assign({}, params);\n        return new Promise(function (success, fail) { return fn(__assign({}, params, { success: success, fail: fail })); })\n            .catch(function (err) { return (console.log(err), Promise.reject(err)); });\n    };\n    return DefaultProvider;\n}());\nexports.DefaultProvider = DefaultProvider;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar default_provider_1 = __webpack_require__(0);\nvar TTProvider = /** @class */ (function (_super) {\n    __extends(TTProvider, _super);\n    function TTProvider() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TTProvider.prototype.getStorageSync = function (key) {\n        return _super.prototype.getStorageSync.call(this, key).data;\n    };\n    return TTProvider;\n}(default_provider_1.DefaultProvider));\nexports.TTProvider = TTProvider;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar i18n_1 = __webpack_require__(3);\nvar i18n = new i18n_1.I18n();\nexports.i18n = i18n;\nvar default_provider_1 = __webpack_require__(0);\nexports.DefaultProvider = default_provider_1.DefaultProvider;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar config_1 = __webpack_require__(4);\nvar store_1 = __webpack_require__(7);\nvar util_1 = __webpack_require__(8);\nvar config;\nvar store;\nvar util;\nvar userLanguage;\nvar I18n = /** @class */ (function () {\n    function I18n(options) {\n        this.config(options);\n    }\n    Object.defineProperty(I18n.prototype, \"language\", {\n        /**\n         * Get current language\n         */\n        get: function () {\n            var rememberLanguage = config.rememberLanguage, languageStorageKey = config.languageStorageKey, provider = config.provider;\n            if (rememberLanguage && languageStorageKey) {\n                if (userLanguage) {\n                    return userLanguage;\n                }\n                else {\n                    var lang = provider.getStorageSync(config.languageStorageKey);\n                    if (lang) {\n                        return userLanguage = lang;\n                    }\n                }\n            }\n            return config.lang;\n        },\n        /**\n         * Set current language\n         */\n        set: function (lang) {\n            config.lang = lang;\n            var rememberLanguage = config.rememberLanguage, languageStorageKey = config.languageStorageKey, provider = config.provider;\n            if (rememberLanguage && languageStorageKey) {\n                userLanguage = lang;\n                provider.setStorage({ key: languageStorageKey, data: lang });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Configure i18n options\n     * @param options\n     */\n    I18n.prototype.config = function (options) {\n        config = Object.assign(config_1.defaultConfig, options);\n        store = new store_1.I18nStore(config);\n        util = new util_1.Util(config);\n        util.debug(\"Current i18n config:\", config);\n    };\n    /**\n     * Get index resource.\n     * @param options options.\n     */\n    I18n.prototype.getIndex = function (options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var indexUrl = config.indexUrl, cachable = config.cachable;\n        if (!cachable || options.forced) {\n            if (!util.isFn(indexUrl)) {\n                throw new Error(\"Please configure the 'indexUrl' option first.\");\n            }\n            var url = indexUrl();\n            if (this.getIndex.prototype.promise) {\n                return this.getIndex.prototype.promise;\n            }\n            util.debug(\"Getting index resource from remote\");\n            var clear_1 = function () { return _this.getIndex.prototype.promise = undefined; };\n            var promise = util.request(url)\n                .then(function (data) { return store.clear(data); })\n                .then(function (data) { return (clear_1(), data); }, function (error) { return (clear_1(), Promise.reject(error)); });\n            return this.getIndex.prototype.promise = promise;\n        }\n        else {\n            util.debug(\"Trying get index resource from local\");\n            return Promise.resolve(this.getIndex.prototype.data)\n                .then(function (data) { return data || _this.getIndex({ forced: true }); })\n                .then(function (data) { return _this.getIndex.prototype.data = data; });\n        }\n    };\n    /**\n     * Get original i18n resources for the corresponding page or componet (default is current page).\n     * @param options options.\n     * @returns the original resources.\n     *\n     * @example\n     * getTexts().then(console.log).catch(console.error);//{ zh:{ hello:\"你好\" },en:{ hello:\"Hello\" } }\n     */\n    I18n.prototype.getTexts = function (options) {\n        if (options === void 0) { options = {}; }\n        var texts = options.texts;\n        if (texts) {\n            util.debug(\"Use local texts\", texts);\n            return Promise.resolve(this.mergeTexts(texts));\n        }\n        var textsUrl = config.textsUrl, cachable = config.cachable;\n        if (!util.isFn(textsUrl)) {\n            throw new Error(\"Please configure the 'textsUrl' option first.\");\n        }\n        var path = options.path || util.getCurrentPageRoute();\n        util.debug(\"Current i18n path is \" + path);\n        if (typeof path !== \"string\") {\n            throw new TypeError(\"The path must be string type.\");\n        }\n        return this.getIndex()\n            .then(function (resources) { return resources[path]; })\n            .then(function (hash) {\n            if (!hash) {\n                return Promise.reject(new Error(\"The path '\" + path + \"' was not defined in index file.\"));\n            }\n            var url = textsUrl(hash, path);\n            if (cachable) {\n                return store.get(path).then(function (data) {\n                    if (data && data.version === hash) {\n                        util.debug(\"Getting text resource from cache.\");\n                        return data;\n                    }\n                    else {\n                        if (!data) {\n                            util.debug(\"The cache resource not exists and getting text resource from remote\");\n                        }\n                        else {\n                            store.remove(path);\n                            util.debug(\"The cache resource has expired.\");\n                        }\n                        return util.request(url)\n                            .then(function (res) { return (res.version = hash, res); })\n                            .then(function (t) { return (store.set(path, t), t); });\n                    }\n                });\n            }\n            else {\n                util.debug(\"Getting text resource from remote\");\n                return util.request(url);\n            }\n        });\n    };\n    /**\n     * Load curennt language's resources and bind to the corresponding page or componet (default is current page).\n     * @param thisArg page or component object.\n     * @param options load options.\n     * @returns the i18n resources.\n     *\n     * @example\n     * //index.js\n     * const {i18n}=require(\"mp-i18n\");\n     * Page({\n     *  onLoad(){\n     *    i18n.load(this)\n     *  }\n     * })\n     *\n     * //index.wxss\n     * <view>{{$t.key}}</view>\n     */\n    I18n.prototype.load = function (thisArg, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var setData = config.provider.getSetData(thisArg);\n        if (!util.isFn(setData)) {\n            throw new TypeError(\"param 'thisArg' has no method 'setData'.\");\n        }\n        var tmplVar = options.tmplVar || config.tmplVar || config_1.defaultConfig.tmplVar;\n        var langVar = options.langVar || config.langVar || config_1.defaultConfig.langVar;\n        var getData = function (texts) {\n            var _a;\n            return (_a = {}, _a[tmplVar] = texts, _a[langVar] = _this.language, _a);\n        };\n        return this.getTexts(options)\n            .then(function (t) { return _this.mergeTexts(t); })\n            .then(function (texts) { return new Promise(function (resolve) { return setData(getData(texts), function () { return resolve(texts); }); }); });\n    };\n    /**\n     * Format a template string with the specified parameter.\n     * @param template the template string.\n     * @param params the parameter object to format template.\n     * @param options formatting options, if the matching symbol(left and right) contains\n     * special characters, please use the character '\\' to escape, such as { left:\"\\\\${\" }.\n     * @returns the formatting result.\n     *\n     * @example\n     * format('hello, {world}!', { world:'fisher' }) //hello, fisher!\n     * format('hello, {world}!', {},{ defaultValue:'world' }) //hello, world!\n     * format('hello, ${world}!', { world:'fisher' }, { left:\"\\\\${\" }) //hello, fisher!\n     */\n    I18n.prototype.format = function (template, params, options) {\n        if (!template) {\n            return template;\n        }\n        if (!util.isStr(template)) {\n            throw new TypeError(\"The param 'template' must be string type.\");\n        }\n        options = Object.assign({ left: \"{\", right: \"}\", defaultValue: \"\" }, options);\n        var left = options.left, right = options.right, defaultValue = options.defaultValue;\n        var regex = new RegExp(left + \"(.+?)\" + right, \"g\");\n        var result = template.replace(regex, function (substr, key) {\n            key = key.trim();\n            var value = params && params[key];\n            if (value === undefined && defaultValue !== undefined) {\n                value = typeof defaultValue === \"object\" ? defaultValue[key] : defaultValue;\n            }\n            return value;\n        });\n        return result;\n    };\n    /**\n     * Merge texts by specified or current language.\n     * @param data multi-language texts.\n     * @param lang the specified language, default use current language.\n     *\n     * @example\n     * mergetTexts({ zh:{ hi:'你好' },en:{ hi:'Hi' } },'en') //{ hi:'Hi' }\n     */\n    I18n.prototype.mergeTexts = function (data, lang) {\n        if (!data) {\n            return {};\n        }\n        var language = lang || this.language;\n        if (!(language in data)) {\n            util.debug(\"The resource corresponding to \" + language + \" does not exist.\", data);\n        }\n        return data[language];\n    };\n    return I18n;\n}());\nexports.I18n = I18n;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar provider_factory_1 = __webpack_require__(5);\nexports.defaultConfig = {\n    cachable: true,\n    debug: false,\n    lang: \"zh_CN\",\n    langVar: \"$lang\",\n    languageStorageKey: \"i18n_language\",\n    provider: provider_factory_1.createProvider(),\n    rememberLanguage: true,\n    storageKeyPrefix: \"i18n\",\n    tmplVar: \"$t\",\n};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar alipay_provider_1 = __webpack_require__(6);\nvar default_provider_1 = __webpack_require__(0);\nvar toutiao_provider_1 = __webpack_require__(1);\nfunction createProvider() {\n    try {\n        if (wx !== undefined) {\n            return new default_provider_1.DefaultProvider(wx);\n        }\n    }\n    catch (error) { }\n    try {\n        if (my !== undefined) {\n            return new alipay_provider_1.AliProvider(my);\n        }\n    }\n    catch (error) { }\n    try {\n        if (tt !== undefined) {\n            return new toutiao_provider_1.TTProvider(tt);\n        }\n    }\n    catch (error) { }\n    try {\n        if (swan !== undefined) {\n            return new default_provider_1.DefaultProvider(tt);\n        }\n    }\n    catch (error) { }\n}\nexports.createProvider = createProvider;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toutiao_provider_1 = __webpack_require__(1);\nvar AliProvider = /** @class */ (function (_super) {\n    __extends(AliProvider, _super);\n    function AliProvider() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AliProvider.prototype.request = function (params) {\n        return _super.prototype.request.call(this, params)\n            .then(function (res) { return (res.statusCode = res.status, res); });\n    };\n    return AliProvider;\n}(toutiao_provider_1.TTProvider));\nexports.AliProvider = AliProvider;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar I18nStore = /** @class */ (function () {\n    function I18nStore(config) {\n        this.prefix = config.storageKeyPrefix;\n        this.provider = config.provider;\n        this.languageKey = config.languageStorageKey;\n    }\n    I18nStore.prototype.get = function (path) {\n        var key = this.getKey(path);\n        return this.provider.getStorage({ key: key })\n            .then(function (res) { return res.data; })\n            .catch(function () { return null; });\n    };\n    I18nStore.prototype.set = function (path, data) {\n        var key = this.getKey(path);\n        return this.provider.setStorage({ key: key, data: data });\n    };\n    I18nStore.prototype.has = function (path) {\n        var key = this.getKey(path);\n        return this.provider.getStorageInfo()\n            .then(function (res) { return res.keys.indexOf(key) >= 0; })\n            .catch(function () { return false; });\n    };\n    I18nStore.prototype.remove = function (path) {\n        var key = this.getKey(path);\n        return this.provider.removeStorage({ key: key });\n    };\n    I18nStore.prototype.getAll = function () {\n        var _this = this;\n        if (!this.prefix) {\n            return Promise.reject(new Error(\"missing i18n configuration option 'storageKeyPrefix'\"));\n        }\n        return this.provider.getStorageInfo()\n            .then(function (info) { return info.keys; })\n            .then(function (keys) { return keys.filter(function (key) { return key.startsWith(_this.prefix); }); });\n    };\n    I18nStore.prototype.clear = function (data) {\n        var _this = this;\n        var from = this.getKey(\"\").length;\n        this.getAll()\n            .then(function (keys) { return keys.filter(function (key) { return key !== _this.languageKey && !(key.substr(from) in data); }); })\n            .then(function (keys) { return keys.forEach(function (key) { return _this.provider.removeStorage({ key: key }); }); })\n            .catch(console.error);\n        return data;\n    };\n    I18nStore.prototype.getKey = function (path) {\n        return this.prefix + \"/\" + path;\n    };\n    return I18nStore;\n}());\nexports.I18nStore = I18nStore;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util = /** @class */ (function () {\n    function Util(config) {\n        this.config = config;\n    }\n    Util.prototype.getCurrentPageRoute = function () {\n        var pages = this.config.provider.getCurrentPages();\n        var currentPage = pages[pages.length - 1];\n        return currentPage.route;\n    };\n    Util.prototype.request = function (url) {\n        var _this = this;\n        this.debug(\"i18n request url: \" + url);\n        return this.config.provider.request({ url: url })\n            .then(function (res) { return (res.statusCode = res.statusCode || res.status, res); })\n            .then(function (_a) {\n            var statusCode = _a.statusCode, data = _a.data;\n            return (statusCode === 200 ? data : Promise.reject(new Error(\"Incorrent status code \" + statusCode)));\n        })\n            .then(function (data) {\n            if (typeof data === \"object\") {\n                return data;\n            }\n            return Promise.reject(new Error(\"invalid i18n config file, please check file contents.\"));\n        })\n            .catch(function (error) { return (_this.debug(\"request error:\", error), Promise.reject(error)); });\n    };\n    Util.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.config.debug) {\n            console.log.apply(console, args);\n        }\n    };\n    Util.prototype.isFn = function (fn) {\n        return typeof fn === \"function\";\n    };\n    Util.prototype.isObj = function (obj) {\n        return typeof obj === \"function\";\n    };\n    Util.prototype.isStr = function (str) {\n        return typeof str === \"string\";\n    };\n    return Util;\n}());\nexports.Util = Util;\n\n\n/***/ })\n/******/ ])));\n//# sourceMappingURL=index.js.map"]}